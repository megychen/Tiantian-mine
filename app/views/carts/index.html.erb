<div class="cart-wrapper">
  <%= link_to("清空购物车", clean_carts_path, method: :delete, class: "pull-right btn btn-default", data: { confirm: "你确定要清空整个购物车吗？" }) %>

  <h4 class="cart-title"> 购物车 </h4>

  <div class="cart-list">
    <% current_cart.cart_items.each do |cart_item| %>
      <div class="cart-item">
        <div class="image col-md-3 col-xs-6">
          <%= link_to product_path(cart_item.product) do %>
            <% if cart_item.product.image.present? %>
              <%= image_tag(cart_item.product.image.thumb.url) %>
            <% else %>
              <%= image_tag("http://placehold.it/200x200&text=No Pic") %>
            <% end %>
          <% end %>
        </div>
        <div class="info col-md-5 col-xs-6">
          <p><%= link_to(cart_item.product.title, product_path(cart_item.product)) %></p>
          <p><%= cart_item.product.description %></p>
          <strong>￥<%= cart_item.product.price %></strong>
        </div>
        <div class="quantity col-md-4 col-xs-12">
          <div class="quantity-action pull-left">
            <% cart_item = current_cart.cart_items.find_by(product_id: cart_item.product_id)%>
            <button class="button" id="sub-btn">
              <%= link_to("-", subtract_quantity_cart_item_path(cart_item.product_id), method: :post) %>
            </button>
            <input class="quantity-value" type="text" value="<%= cart_item.quantity %>">
            <button class="button" id="inc-btn">
              <%= link_to("+", increment_quantity_cart_item_path(cart_item.product_id), method: :post) %>
            </button>
          </div>
          <span class="pull-right"><%= link_to("移除商品", cart_item_path(cart_item.product_id), method: :delete, class: "btn btn-sm btn-default")  %></span>
        </div>
      </div>
    <% end %>
  </div>
</div>
